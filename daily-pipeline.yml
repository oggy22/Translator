schedules:
- cron: "0 0 * * *"
  displayName: Daily midnight build
  branches:
    include:
    - master
    - daily-pipeline

pool:
  vmImage: 'windows-latest'

steps:
- task: VSBuild@1
  displayName: 'Build release'
  inputs:
    solution: '**\*.sln' 
    vsVersion: 'latest'
    configuration: release
    msbuildArchitecture: 'x64'

- task: CmdLine@2
  displayName: 'Generate palindromes'
  inputs:
    script: |
      Release\TranslatorCpp.exe -palindromep:SR 2 0.4 > palindromes.csv

- task: PublishBuildArtifacts@1
  displayName: 'Publish Artifact: palindromes_SR_daily'
  inputs:
    PathtoPublish: 'palindromes.csv'
    ArtifactName: 'palindromes_SR_daily'
